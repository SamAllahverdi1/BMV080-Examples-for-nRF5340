/*
 * Devicetree overlay for the Bosch BMV080 Particulate Matter Sensor
 */

/ {
    /*
     * This node defines the GPIOs used by the BMV080.
     * The only interactive pin needed for the driver is the interrupt (IRQ).
     */
    sensor_gpios {
        compatible = "gpio-keys";

        /* The BMV080's interrupt pin (IRQ), which is active low. */
        /* This corresponds to the 'intn' label from your old file. */
        /* Make sure <&gpio1 14 ...> matches your board's schematic! */
        interrupt_pin: interrupt_pin {
            gpios = <&gpio1 14 GPIO_ACTIVE_LOW>;
            label = "BMV080 Interrupt Pin";
        };
    };
};

/* Enable the I2C1 bus */
&i2c1 {
    status = "okay";

    /*
     * Define the BMV080 sensor on the I2C bus.
     * This node now has the label "bmv080" for your C code.
     */
    bmv080: bmv080@54 {
        /*
         * CRITICAL: The I2C address depends on your hardware wiring.
         * The datasheet (Table 14) shows 4 possible addresses.
         * 0x54 is the address when pins CSB and MISO are both tied to ground.
         * Verify this address against your schematic!
         */
        reg = <0x54>;

        /*
         * Using a specific compatible string is best practice.
         * The Bosch driver for this sensor will look for this.
         */
        compatible = "bosch,bmv080";

        /* The IRQ pin is connected to the interrupt_pin defined above. */
        irq-gpios = <&interrupt_pin>;
    };
};